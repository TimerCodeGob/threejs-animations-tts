<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>August - Realistic Beach</title>
<link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
<style>
  body { margin: 0; overflow: hidden; background: #87ceeb; font-family: 'Lobster', cursive; }
  .ui { position: absolute; top: 20px; width: 100%; text-align: center; z-index: 10; pointer-events: none; }
  .title { font-size: 48px; color: #ffdd44; text-shadow: 0 0 20px #ffaa00; }
  .footer { position: absolute; bottom: 20px; width: 100%; text-align: center; font-size: 18px; color: #ffd700; opacity: 0.9; z-index: 10; }
  .logo img { width: 140px; margin-top: 6px; filter: drop-shadow(0 0 10px orange); }
  /* BotÃ³n para activar audio */
  #play-btn { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); padding: 15px 30px; font-family: 'Lobster'; font-size: 24px; background: #ffdd44; border: none; border-radius: 50px; cursor: pointer; z-index: 20; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
</style>
</head>
<body>

<button id="play-btn">Click para sentir el Verano ðŸŒŠ</button>

<div class="ui"><div class="title">August - Summer Vibes</div></div>
<div class="footer">Powered By Animations Mexican&reg;
  <div class="logo"><img src="https://timercodgob.edgeone.dev/gob.png" alt="TimerCode Logo"></div>
</div>

<script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
    }
  }
</script>

<script type="module">
import * as THREE from 'three';
import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
import { Water } from 'three/addons/objects/Water.js';

const scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb);

const camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(10, 8, 15);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(window.devicePixelRatio);
renderer.toneMapping = THREE.ACESFilmicToneMapping;
document.body.appendChild(renderer.domElement);

// ðŸŒž Luces
const sun = new THREE.DirectionalLight(0xffffff, 1.5);
sun.position.set(50, 50, 50);
scene.add(sun);
scene.add(new THREE.AmbientLight(0xffffff, 0.6));

// ðŸ– Arena (Bajada un poco para evitar Z-fighting con el agua)
const loader = new THREE.TextureLoader();
const sandTexture = loader.load('https://threejs.org/examples/textures/terrain/sand.jpg');
sandTexture.wrapS = sandTexture.wrapT = THREE.RepeatWrapping;
sandTexture.repeat.set(5, 5);

const sandGeo = new THREE.PlaneGeometry(100, 100);
const sandMat = new THREE.MeshStandardMaterial({ map: sandTexture });
const sand = new THREE.Mesh(sandGeo, sandMat);
sand.rotation.x = -Math.PI / 2;
sand.position.y = -0.1; // Un poquito abajo del agua
scene.add(sand);

// ðŸŒŠ Agua (Usando la versiÃ³n de Ocean que es mÃ¡s vistosa)
const waterGeometry = new THREE.PlaneGeometry(1000, 1000);
const water = new Water(waterGeometry, {
    textureWidth: 512,
    textureHeight: 512,
    waterNormals: loader.load('https://threejs.org/examples/textures/waternormals.jpg', (t) => {
        t.wrapS = t.wrapT = THREE.RepeatWrapping;
    }),
    sunDirection: new THREE.Vector3(),
    sunColor: 0xffffff,
    waterColor: 0x001e0f,
    distortionScale: 3.7,
    fog: scene.fog !== undefined
});
water.rotation.x = -Math.PI / 2;
scene.add(water);

// ðŸŒ´ Palmeras
function createPalm(x, z) {
  const group = new THREE.Group();
  
  const trunkGeo = new THREE.CylinderGeometry(0.15, 0.25, 4, 12);
  const trunkMat = new THREE.MeshStandardMaterial({color: 0x8b5a2b});
  const trunk = new THREE.Mesh(trunkGeo, trunkMat);
  trunk.position.y = 2;
  group.add(trunk);

  const leavesMat = new THREE.MeshStandardMaterial({color: 0x228B22, side: THREE.DoubleSide});
  for(let i=0; i<6; i++) {
    const leafGeo = new THREE.SphereGeometry(1.5, 8, 8, 0, Math.PI*2, 0, 0.5);
    const leaf = new THREE.Mesh(leafGeo, leavesMat);
    leaf.position.y = 4;
    leaf.rotation.z = Math.PI / 2;
    leaf.rotation.y = (i * Math.PI) / 3;
    group.add(leaf);
  }
  
  group.position.set(x, 0, z);
  scene.add(group);
}
createPalm(-6, -5);
createPalm(5, 3);
createPalm(2, 8);

// ðŸ”Š Sonido
const listener = new THREE.AudioListener();
camera.add(listener);
const oceanSound = new THREE.Audio(listener);
const audioLoader = new THREE.AudioLoader();

// El audio solo inicia tras interacciÃ³n
const playBtn = document.getElementById('play-btn');
playBtn.addEventListener('click', () => {
  audioLoader.load('https://www.soundjay.com/nature/ocean-wave-1.mp3', function(buffer) {
    oceanSound.setBuffer(buffer);
    oceanSound.setLoop(true);
    oceanSound.setVolume(0.3);
    oceanSound.play();
  });
  playBtn.style.display = 'none';
});

// ðŸ–±ï¸ Controles
const controls = new OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.maxDistance = 50;
controls.maxPolarAngle = Math.PI / 2.1; // No dejar ver debajo del suelo

// ðŸŒ€ AnimaciÃ³n
function animate() {
  requestAnimationFrame(animate);
  const time = performance.now() * 0.001;
  water.material.uniforms['time'].value += 1.0 / 60.0;
  controls.update();
  renderer.render(scene, camera);
}
animate();

// ðŸ“± Responsive
window.addEventListener('resize', () => {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>

</body>
</html>
